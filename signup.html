<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css.css">
    <title>Sign Up</title>
    <link rel="icon" type="image/png" href="favicon-32x32.png">
</head>
<body>
    <div id="auth-container">
        <h1>Create Account</h1>
        <input type="text" id="signup-user" placeholder="Username">
        <input type="email" id="signup-email" placeholder="Email">
        <input type="password" id="signup-pass" placeholder="Password">
        <button type="button" onclick="createAccount()">Sign Up</button>
        <p><a href="index.html">Back to Hub</a></p>
    </div>
    <script>
async function createAccount() {
    const user = document.getElementById('signup-user').value;
    const email = document.getElementById('signup-email').value;
    const pass = document.getElementById('signup-pass').value;
    
    if(user && email && pass) {
        try {
            // FIXED: Added /get-data
            const response = await fetch('/get-data'); 
            let allUsers = await response.json();
            if (!Array.isArray(allUsers)) allUsers = [];

            allUsers.push({ username: user, email: email, password: pass, friends: [], requests: [] });

            // FIXED: Added /save-data
            await fetch('/save-data', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(allUsers)
            });

            sessionStorage.setItem("currentUser", JSON.stringify({ email, username: user }));
            window.location.href = 'dashboard.html';
        } catch (err) {
            console.error(err);
            alert("Error connecting to server!");
        }
    }
}
    </script>
</body>
</html>





